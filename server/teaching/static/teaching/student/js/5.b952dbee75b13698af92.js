webpackJsonp([5],{"2I10":function(t,e,s){"use strict";var n=s("Gu7T"),o=s.n(n),a=s("BRoD"),i=s("qpNt"),c=s("H9my"),r=s("kA2o"),l={name:"HomeworkPanelComponent",props:["homeworkPanel"],data:function(){return{score:this.homeworkPanel.score,url:"",count:0}},created:function(){this.refreshStatus()},methods:{showStage:function(t){i.a.stage=t,r.a.push("student-stage")},gotoPage:function(t){var e=gameUrl+"?";e+="gcid="+t.gcid+"&",e+="uid="+a.a.uid+"&",e+="token="+a.a.token+"&",e+="sid="+a.a.upid+"&",e+="student="+a.a.uid,window.open(e,"game")},refreshStatus:function(){var t=this;this.count=0;var e=[].concat(o()(this.score));e.forEach(function(s,n){c.a.send({url:"GameStageIsFinished",data:{gcid:s.gcid,student:a.a.uid}}).success(function(n){s.finish=n,t.count+=1,t.score=[].concat(o()(e))}).fail(function(t){console.log(t)}),c.a.send({url:"GameStageIsUnlock",data:{gcid:s.gcid,student:a.a.uid}}).success(function(n){s.unlock=n,t.score=[].concat(o()(e))}).fail(function(t){console.log(t)})})}},watch:{count:function(t){this.$emit("REFRESH_SCHEDULE_EVENT",t)}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"homework-panel"},[s("div",{staticClass:"panel-header"},[s("div",{staticClass:"panel-title"},[t._v(t._s(t.homeworkPanel.title))]),t._v(" "),s("button",{staticClass:"panel-refresh",on:{click:t.refreshStatus}},[t._v("刷新")])]),t._v(" "),s("table",[t._m(0),t._v(" "),s("tbody",{staticClass:"border-1"},t._l(t.score,function(e,n){return s("tr",{key:n},[s("td",[t._v(t._s(e.detail.chapter))]),t._v(" "),s("td",[s("button",{staticClass:"detail-btn color-white",class:{"bg-grey":!e.unlock},attrs:{disabled:!e.unlock},on:{click:function(s){t.gotoPage(e)}}},[t._v(t._s(e.unlock?"跳转":"已锁"))])]),t._v(" "),s("th",[t._v(t._s(e.finish?"已完成":"未完成"))]),t._v(" "),s("td",[s("button",{staticClass:"detail-btn color-white",class:{"bg-grey":!e.unlock},attrs:{disabled:!e.unlock},on:{click:function(s){t.showStage(e)}}},[s("div",[t._v(t._s(e.unlock?"查看":"已锁"))])])])])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("标题")]),this._v(" "),e("th",[this._v("游戏")]),this._v(" "),e("th",[this._v("通关")]),this._v(" "),e("th",[this._v("详情")])])}]};var d=s("VU/8")(l,u,!1,function(t){s("gzw1")},"data-v-20ed1207",null);e.a=d.exports},ZzPh:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("BRoD"),o=s("qpNt"),a=s("H9my"),i=s("2I10"),c=s("6r+G"),r={name:"HomeworkComponent",data:function(){return{comment:"",homeworkPanel:[],schedule:0}},components:{HomeworkPanelComponent:i.a,ScheduleComponent:c.a},created:function(){n.a.logout(),this.getScoreList()},methods:{getScoreList:function(){var t=this;a.a.send({url:"HomeworkScoreList",data:{oid:o.a.homework.oid,lid:o.a.homework.lid,student:n.a.uid,sid:n.a.upid}}).success(function(e){t.homeworkPanel=t.formatData(e)}).fail(function(t){})},formatData:function(t){var e=[],s={title:"酷町猫",score:[]};return t.forEach(function(t){s.score.push(t)}),e.push(s),console.log(e),e},refreshSchedule:function(t){this.schedule=100*t/this.max}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"homework-detail"},[s("div",{staticClass:"detail-statistics"},[s("div",{staticClass:"statistics-tip"},[t._v("作业完成度")]),t._v(" "),s("div",{staticClass:"statistics-schedule"},[s("ScheduleComponent",{attrs:{schedule:t.schedule}})],1)]),t._v(" "),s("div",{staticClass:"detail-content"},t._l(t.homeworkPanel,function(e,n){return s("HomeworkPanelComponent",{key:n,attrs:{homeworkPanel:e},on:{REFRESH_SCHEDULE_EVENT:t.refreshSchedule}})}),1),t._v(" "),t.comment?s("p",{staticClass:"detail-valuation"},[s("span",{staticClass:"fz-24"},[t._v("评语：")]),t._v(" "),s("span",{staticClass:"fz-18"},[t._v(t._s(t.comment))])]):t._e()])},staticRenderFns:[]};var u=s("VU/8")(r,l,!1,function(t){s("b9St")},"data-v-1205d192",null);e.default=u.exports},b9St:function(t,e){},gzw1:function(t,e){}});